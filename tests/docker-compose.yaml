version: '3'
services:
  database:
    image: "bitnami/postgresql:12.9.0"
    ports:
      - 5432:5432
    # https://github.com/bitnami/bitnami-docker-postgresql/blob/master/12/debian-10/rootfs/opt/bitnami/scripts/postgresql-env.sh
    environment:
      POSTGRESQL_PASSWORD: test_pw
      POSTGRES_DB: test_db
      POSTGRES_PORT: 5432
      POSTGRESQL_WAL_LEVEL: logical
    volumes:
      - ./init.sql:/docker-entrypoint-initdb.d/init.sql
      - database-data:/var/lib/postgresql/data/ # persist data even if container shuts down

volumes:
    database-data: # named volumes can be managed easier using docker-compose
